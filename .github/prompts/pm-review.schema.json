{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/j0hnnymiller/ai-practitioner-resources/pm-review-schema.json",
  "title": "PM Review Response Schema",
  "description": "Schema for GitHub Copilot Project Manager issue review responses",
  "type": "object",
  "properties": {
    "ready": {
      "type": "boolean",
      "description": "Whether the issue is ready for implementation"
    },
    "independence": {
      "type": "string",
      "enum": ["high", "low"],
      "description": "Whether the issue can be implemented independently or has blocking dependencies"
    },
    "size": {
      "type": "string",
      "enum": ["small", "medium", "large"],
      "description": "Estimated size/complexity of the issue"
    },
    "priorityScore": {
      "type": "integer",
      "minimum": 0,
      "maximum": 100,
      "description": "Priority score derived from impact, urgency, risk, size, and independence"
    },
    "riskLevel": {
      "type": "string",
      "enum": ["low", "medium", "high"],
      "description": "Risk level associated with implementing this issue"
    },
    "parallelSafety": {
      "type": "string",
      "enum": ["safe", "unsafe", "unclear"],
      "description": "Whether the issue can proceed without conflicts with typical concurrent work"
    },
    "labels": {
      "type": "object",
      "description": "Labels to add or remove from the issue",
      "properties": {
        "add": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Labels to add to the issue"
        },
        "remove": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Labels to remove from the issue"
        }
      },
      "required": ["add", "remove"],
      "additionalProperties": false
    },
    "assignees": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "GitHub usernames to assign. Include author if ready=true and author is contributor. Otherwise empty."
    },
    "needsSplit": {
      "type": "boolean",
      "description": "REQUIRED FIELD. true if size is large and should be split into sub-issues. When true, reformattedBody MUST be null."
    },
    "subIssues": {
      "type": "array",
      "description": "REQUIRED FIELD. Array of sub-issues (only if needsSplit=true). Empty array [] if needsSplit=false.",
      "items": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "Descriptive title for the sub-issue, include parent context"
          },
          "body": {
            "type": "string",
            "description": "Body/description for the sub-issue with acceptance criteria"
          },
          "labels": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Labels to apply to the sub-issue (e.g., ['size:small', 'enhancement', 'implementation ready'])"
          }
        },
        "required": ["title", "body", "labels"],
        "additionalProperties": false
      }
    },
    "reformattedBody": {
      "type": ["string", "null"],
      "description": "REQUIRED FIELD. If issue body doesn't conform to template, provide properly formatted version. null if no reformatting needed OR if needsSplit=true (splitting takes precedence)."
    }
  },
  "required": [
    "ready",
    "independence",
    "size",
    "priorityScore",
    "riskLevel",
    "parallelSafety",
    "labels",
    "assignees",
    "needsSplit",
    "subIssues",
    "reformattedBody"
  ],
  "additionalProperties": false
}
